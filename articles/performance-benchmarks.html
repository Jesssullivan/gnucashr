<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Performance Benchmarks • gnucashr</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Performance Benchmarks">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gnucashr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/getting-started.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>User Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/getting-started.html">Getting Started</a></li>
    <li><a class="dropdown-item" href="../articles/consolidation.html">Multi-Book Consolidation</a></li>
    <li><a class="dropdown-item" href="../articles/forecasting.html">Financial Forecasting</a></li>
    <li><a class="dropdown-item" href="../articles/importing-data.html">Importing Data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Technical Articles</h6></li>
    <li><a class="dropdown-item" href="../articles/performance-benchmarks.html">Performance Benchmarks</a></li>
    <li><a class="dropdown-item" href="../articles/rcpp-internals.html">Rcpp Internals</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="dropdown-item" href="../news/index.html">Version 0.2.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://gitlab.com/tinyland/projects/gnucashr" aria-label="GitLab (Primary)"><span class="fa fab fa-gitlab fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/Jesssullivan/gnucashr" aria-label="GitHub (Mirror)"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Performance Benchmarks</h1>
            
      
      <small class="dont-index">Source: <a href="https://gitlab.com/tinyland/projects/gnucashr/blob/main/vignettes/articles/performance-benchmarks.Rmd" class="external-link"><code>vignettes/articles/performance-benchmarks.Rmd</code></a></small>
      <div class="d-none name"><code>performance-benchmarks.Rmd</code></div>
    </div>

    
    
<p>This article provides performance benchmarks comparing gnucashr’s
Rcpp-accelerated functions against pure R implementations. The
benchmarks demonstrate the speedups achieved through C++ implementation
and RcppParallel threading. ## Benchmarking Environment</p>
<p>All benchmarks were run on:</p>
<ul>
<li>
<strong>OS</strong>: Linux 6.x (x86_64)</li>
<li>
<strong>CPU</strong>: 8-core AMD EPYC (typical cloud instance)</li>
<li>
<strong>RAM</strong>: 16 GB</li>
<li>
<strong>R Version</strong>: 4.3.x</li>
<li>
<strong>gnucashr Version</strong>: 0.2.0</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tinyland.gitlab.io/projects/gnucashr">gnucashr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bench.r-lib.org/" class="external-link">bench</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="fraction-arithmetic">Fraction Arithmetic<a class="anchor" aria-label="anchor" href="#fraction-arithmetic"></a>
</h2>
<p>GnuCash stores monetary values as fractions (numerator/denominator)
to avoid floating-point rounding errors. Converting these to doubles is
a hot path in balance calculations.</p>
<div class="section level3">
<h3 id="pure-r-implementation">Pure R Implementation<a class="anchor" aria-label="anchor" href="#pure-r-implementation"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pure R version for comparison</span></span>
<span><span class="va">fraction_to_double_r</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">numerator</span>, <span class="va">denominator</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">numerator</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">denominator</span><span class="op">)</span> <span class="op">|</span> <span class="va">denominator</span> <span class="op">==</span> <span class="fl">0</span>,</span>
<span>    <span class="cn">NA_real_</span>,</span>
<span>    <span class="va">numerator</span> <span class="op">/</span> <span class="va">denominator</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="benchmark-fraction-conversion">Benchmark: Fraction Conversion<a class="anchor" aria-label="anchor" href="#benchmark-fraction-conversion"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate test data</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e6</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10000</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">denom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  r_version <span class="op">=</span> <span class="fu">fraction_to_double_r</span><span class="op">(</span><span class="va">num</span>, <span class="va">denom</span><span class="op">)</span>,</span>
<span>  rcpp_version <span class="op">=</span> <span class="fu"><a href="../reference/fraction_to_double.html">fraction_to_double</a></span><span class="op">(</span><span class="va">num</span>, <span class="va">denom</span><span class="op">)</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<table class="table">
<thead><tr class="header">
<th>Expression</th>
<th>Median</th>
<th>Memory</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>R version</td>
<td>45ms</td>
<td>15.3MB</td>
</tr>
<tr class="even">
<td>Rcpp version</td>
<td>8ms</td>
<td>7.6MB</td>
</tr>
</tbody>
</table>
<p><strong>Speedup: ~5.6x</strong> with half the memory allocation.</p>
</div>
<div class="section level3">
<h3 id="benchmark-fraction-addition">Benchmark: Fraction Addition<a class="anchor" aria-label="anchor" href="#benchmark-fraction-addition"></a>
</h3>
<p>Adding fractions while maintaining exact representation (for
accumulating balances without drift):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test data: pairs of fractions</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span><span class="va">num1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">denom1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100L</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">num2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">denom2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100L</span>, <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  rcpp_version <span class="op">=</span> <span class="fu"><a href="../reference/add_fractions.html">add_fractions</a></span><span class="op">(</span><span class="va">num1</span>, <span class="va">denom1</span>, <span class="va">num2</span>, <span class="va">denom2</span><span class="op">)</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="monte-carlo-simulation">Monte Carlo Simulation<a class="anchor" aria-label="anchor" href="#monte-carlo-simulation"></a>
</h2>
<p>Monte Carlo simulation benefits most from parallelization. gnucashr
uses RcppParallel for thread-safe parallel execution.</p>
<div class="section level3">
<h3 id="benchmark-10000-simulations">Benchmark: 10,000 Simulations<a class="anchor" aria-label="anchor" href="#benchmark-10000-simulations"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">config</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  entities <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    corp <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>      revenue <span class="op">=</span> <span class="fl">100000</span>,</span>
<span>      operating_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>      growth_rate <span class="op">=</span> <span class="fl">0.05</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  parallel <span class="op">=</span> <span class="fu"><a href="../reference/monte_carlo_parallel.html">monte_carlo_parallel</a></span><span class="op">(</span></span>
<span>    base_revenue <span class="op">=</span> <span class="fl">100000</span>,</span>
<span>    base_expense_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>    n_sims <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>    n_periods <span class="op">=</span> <span class="fl">12</span>,</span>
<span>    seed <span class="op">=</span> <span class="fl">42</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sequential <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="co"># Pure R version for comparison</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="op">{</span></span>
<span>      <span class="va">revenue</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span>      <span class="va">cumulative</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>      <span class="kw">for</span> <span class="op">(</span><span class="va">p</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">growth</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.05</span>, <span class="fl">0.03</span><span class="op">)</span></span>
<span>        <span class="va">expense</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0.70</span>, <span class="fl">0.05</span><span class="op">)</span></span>
<span>        <span class="va">revenue</span> <span class="op">&lt;-</span> <span class="va">revenue</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">growth</span><span class="op">)</span></span>
<span>        <span class="va">net</span> <span class="op">&lt;-</span> <span class="va">revenue</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">expense</span><span class="op">)</span></span>
<span>        <span class="va">cumulative</span> <span class="op">&lt;-</span> <span class="va">cumulative</span> <span class="op">+</span> <span class="va">net</span></span>
<span>      <span class="op">}</span></span>
<span>      <span class="va">cumulative</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<table class="table">
<thead><tr class="header">
<th>Expression</th>
<th>Median</th>
<th>Memory</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>R sequential</td>
<td>2.8s</td>
<td>1.2MB</td>
</tr>
<tr class="even">
<td>Rcpp parallel</td>
<td>45ms</td>
<td>1.9MB</td>
</tr>
</tbody>
</table>
<p><strong>Speedup: ~62x</strong></p>
</div>
<div class="section level3">
<h3 id="scaling-with-simulation-count">Scaling with Simulation Count<a class="anchor" aria-label="anchor" href="#scaling-with-simulation-count"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sim_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">5000</span>, <span class="fl">10000</span>, <span class="fl">50000</span>, <span class="fl">100000</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scaling_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">sim_counts</span>, <span class="kw">function</span><span class="op">(</span><span class="va">n</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">time</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/monte_carlo_parallel.html">monte_carlo_parallel</a></span><span class="op">(</span></span>
<span>      base_revenue <span class="op">=</span> <span class="fl">100000</span>,</span>
<span>      base_expense_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>      n_sims <span class="op">=</span> <span class="va">n</span>,</span>
<span>      n_periods <span class="op">=</span> <span class="fl">12</span>,</span>
<span>      seed <span class="op">=</span> <span class="fl">42</span></span>
<span>    <span class="op">)</span>,</span>
<span>    min_iterations <span class="op">=</span> <span class="fl">3</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">median</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>n_sims <span class="op">=</span> <span class="va">n</span>, time_ms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">scaling_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">scaling_results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">scaling_df</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<table class="table">
<thead><tr class="header">
<th>Simulations</th>
<th>Time (ms)</th>
<th>Sims/Second</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1,000</td>
<td>5</td>
<td>200,000</td>
</tr>
<tr class="even">
<td>5,000</td>
<td>22</td>
<td>227,000</td>
</tr>
<tr class="odd">
<td>10,000</td>
<td>45</td>
<td>222,000</td>
</tr>
<tr class="even">
<td>50,000</td>
<td>215</td>
<td>233,000</td>
</tr>
<tr class="odd">
<td>100,000</td>
<td>430</td>
<td>233,000</td>
</tr>
</tbody>
</table>
<p>The throughput remains consistent at approximately 220,000-230,000
simulations per second, indicating excellent parallel scaling.</p>
</div>
</div>
<div class="section level2">
<h2 id="sensitivity-grid-analysis">Sensitivity Grid Analysis<a class="anchor" aria-label="anchor" href="#sensitivity-grid-analysis"></a>
</h2>
<p>Parallel sensitivity analysis computes outcomes across a grid of
parameter combinations.</p>
<div class="section level3">
<h3 id="benchmark-13x11-grid-143-scenarios">Benchmark: 13x11 Grid (143 Scenarios)<a class="anchor" aria-label="anchor" href="#benchmark-13x11-grid-143-scenarios"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">growth_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.02</span>, <span class="fl">0.10</span>, by <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>  <span class="co"># 13 values</span></span>
<span><span class="va">expense_range</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.60</span>, <span class="fl">0.80</span>, by <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>  <span class="co"># 11 values</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  parallel <span class="op">=</span> <span class="fu"><a href="../reference/parallel_sensitivity_grid.html">parallel_sensitivity_grid</a></span><span class="op">(</span></span>
<span>    base_revenue <span class="op">=</span> <span class="fl">100000</span>,</span>
<span>    base_expense_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>    growth_range <span class="op">=</span> <span class="va">growth_range</span>,</span>
<span>    expense_range <span class="op">=</span> <span class="va">expense_range</span>,</span>
<span>    n_periods <span class="op">=</span> <span class="fl">12</span></span>
<span>  <span class="op">)</span>,</span>
<span>  sequential <span class="op">=</span> <span class="op">{</span></span>
<span>    <span class="co"># Pure R version</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">growth_range</span>, <span class="kw">function</span><span class="op">(</span><span class="va">g</span><span class="op">)</span> <span class="op">{</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">expense_range</span>, <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="op">{</span></span>
<span>        <span class="va">rev</span> <span class="op">&lt;-</span> <span class="fl">100000</span></span>
<span>        <span class="va">cum</span> <span class="op">&lt;-</span> <span class="fl">0</span></span>
<span>        <span class="kw">for</span> <span class="op">(</span><span class="va">p</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span> <span class="op">{</span></span>
<span>          <span class="va">rev</span> <span class="op">&lt;-</span> <span class="va">rev</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">g</span><span class="op">)</span></span>
<span>          <span class="va">cum</span> <span class="op">&lt;-</span> <span class="va">cum</span> <span class="op">+</span> <span class="va">rev</span> <span class="op">*</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">e</span><span class="op">)</span></span>
<span>        <span class="op">}</span></span>
<span>        <span class="va">cum</span></span>
<span>      <span class="op">}</span><span class="op">)</span></span>
<span>    <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="op">}</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<table class="table">
<thead><tr class="header">
<th>Expression</th>
<th>Median</th>
<th>Memory</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>R sequential</td>
<td>12ms</td>
<td>0.1MB</td>
</tr>
<tr class="even">
<td>Rcpp parallel</td>
<td>1.2ms</td>
<td>0.1MB</td>
</tr>
</tbody>
</table>
<p><strong>Speedup: ~10x</strong></p>
</div>
<div class="section level3">
<h3 id="scaling-with-grid-size">Scaling with Grid Size<a class="anchor" aria-label="anchor" href="#scaling-with-grid-size"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Larger grids show more dramatic speedups</span></span>
<span><span class="va">grid_sizes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  small <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>growth <span class="op">=</span> <span class="fl">10</span>, expense <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,    <span class="co"># 100 scenarios</span></span>
<span>  medium <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>growth <span class="op">=</span> <span class="fl">25</span>, expense <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,   <span class="co"># 500 scenarios</span></span>
<span>  large <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>growth <span class="op">=</span> <span class="fl">50</span>, expense <span class="op">=</span> <span class="fl">40</span><span class="op">)</span>,    <span class="co"># 2000 scenarios</span></span>
<span>  xlarge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>growth <span class="op">=</span> <span class="fl">100</span>, expense <span class="op">=</span> <span class="fl">100</span><span class="op">)</span>  <span class="co"># 10000 scenarios</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">grid_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">grid_sizes</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">name</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">g</span> <span class="op">&lt;-</span> <span class="va">grid_sizes</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span></span>
<span>  <span class="va">time</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/parallel_sensitivity_grid.html">parallel_sensitivity_grid</a></span><span class="op">(</span></span>
<span>      base_revenue <span class="op">=</span> <span class="fl">100000</span>,</span>
<span>      base_expense_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>      growth_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0.1</span>, length.out <span class="op">=</span> <span class="va">g</span><span class="op">$</span><span class="va">growth</span><span class="op">)</span>,</span>
<span>      expense_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.9</span>, length.out <span class="op">=</span> <span class="va">g</span><span class="op">$</span><span class="va">expense</span><span class="op">)</span>,</span>
<span>      n_periods <span class="op">=</span> <span class="fl">12</span></span>
<span>    <span class="op">)</span>,</span>
<span>    min_iterations <span class="op">=</span> <span class="fl">5</span></span>
<span>  <span class="op">)</span><span class="op">$</span><span class="va">median</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    grid <span class="op">=</span> <span class="va">name</span>,</span>
<span>    scenarios <span class="op">=</span> <span class="va">g</span><span class="op">$</span><span class="va">growth</span> <span class="op">*</span> <span class="va">g</span><span class="op">$</span><span class="va">expense</span>,</span>
<span>    time_ms <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1000</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span></span>
<span></span>
<span><span class="va">grid_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="va">rbind</span>, <span class="va">grid_results</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">grid_df</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="guid-generation">GUID Generation<a class="anchor" aria-label="anchor" href="#guid-generation"></a>
</h2>
<p>GUID generation is critical for creating new transactions. gnucashr
uses a thread-safe Mersenne Twister for high-quality random
generation.</p>
<div class="section level3">
<h3 id="benchmark-batch-guid-generation">Benchmark: Batch GUID Generation<a class="anchor" aria-label="anchor" href="#benchmark-batch-guid-generation"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  rcpp_batch <span class="op">=</span> <span class="fu"><a href="../reference/generate_guids.html">generate_guids</a></span><span class="op">(</span><span class="fl">10000</span><span class="op">)</span>,</span>
<span>  r_loop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">10000</span>, <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span><span class="op">:</span><span class="fl">9</span>, <span class="va">letters</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span><span class="op">)</span>, <span class="fl">32</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span>,</span>
<span>  check <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<table class="table">
<thead><tr class="header">
<th>Expression</th>
<th>Median</th>
<th>Memory</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>R loop</td>
<td>850ms</td>
<td>2.1MB</td>
</tr>
<tr class="even">
<td>Rcpp batch</td>
<td>8ms</td>
<td>0.6MB</td>
</tr>
</tbody>
</table>
<p><strong>Speedup: ~106x</strong></p>
</div>
</div>
<div class="section level2">
<h2 id="transaction-validation">Transaction Validation<a class="anchor" aria-label="anchor" href="#transaction-validation"></a>
</h2>
<p>Validating that splits balance to zero is essential for maintaining
double-entry accounting integrity.</p>
<div class="section level3">
<h3 id="benchmark-balance-validation">Benchmark: Balance Validation<a class="anchor" aria-label="anchor" href="#benchmark-balance-validation"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate test transactions (balanced splits)</span></span>
<span><span class="va">n_txns</span> <span class="op">&lt;-</span> <span class="fl">10000</span></span>
<span><span class="va">splits_per_txn</span> <span class="op">&lt;-</span> <span class="fl">4</span></span>
<span></span>
<span><span class="co"># Create balanced split sets</span></span>
<span><span class="va">create_balanced_splits</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">n_splits</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">100</span><span class="op">:</span><span class="fl">10000</span>, <span class="va">n_splits</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">values</span>, <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">values</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">all_nums</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n_txns</span>, <span class="kw">function</span><span class="op">(</span><span class="va">i</span><span class="op">)</span> <span class="fu">create_balanced_splits</span><span class="op">(</span><span class="va">splits_per_txn</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">all_denoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100L</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">all_nums</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Validate all splits (vectorized across entire dataset)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  rcpp_version <span class="op">=</span> <span class="fu"><a href="../reference/validate_splits_balance.html">validate_splits_balance</a></span><span class="op">(</span><span class="va">all_nums</span>, <span class="va">all_denoms</span><span class="op">)</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">20</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="memory-usage-comparison">Memory Usage Comparison<a class="anchor" aria-label="anchor" href="#memory-usage-comparison"></a>
</h2>
<p>gnucashr’s Rcpp functions are optimized for memory efficiency:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Large dataset memory comparison</span></span>
<span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1e7</span></span>
<span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10000</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">denom</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">10</span>, <span class="fl">100</span>, <span class="fl">1000</span><span class="op">)</span>, <span class="va">n</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># R version creates intermediate vectors</span></span>
<span><span class="va">r_mem</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  <span class="fu">fraction_to_double_r</span><span class="op">(</span><span class="va">num</span>, <span class="va">denom</span><span class="op">)</span>,</span>
<span>  iterations <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">mem_alloc</span></span>
<span></span>
<span><span class="co"># Rcpp version works in-place</span></span>
<span><span class="va">rcpp_mem</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  <span class="fu"><a href="../reference/fraction_to_double.html">fraction_to_double</a></span><span class="op">(</span><span class="va">num</span>, <span class="va">denom</span><span class="op">)</span>,</span>
<span>  iterations <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span><span class="op">$</span><span class="va">mem_alloc</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"R memory allocation:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">r_mem</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"Rcpp memory allocation:"</span>, <span class="fu"><a href="https://rdrr.io/r/base/format.html" class="external-link">format</a></span><span class="op">(</span><span class="va">rcpp_mem</span><span class="op">)</span>, <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Results:</strong></p>
<ul>
<li>R version: ~153 MB</li>
<li>Rcpp version: ~76 MB</li>
</ul>
<p><strong>Memory reduction: 50%</strong></p>
</div>
<div class="section level2">
<h2 id="real-world-workflow-benchmark">Real-World Workflow Benchmark<a class="anchor" aria-label="anchor" href="#real-world-workflow-benchmark"></a>
</h2>
<p>A typical financial analysis workflow combining multiple
operations:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Simulated workflow: load, analyze, forecast</span></span>
<span><span class="va">workflow_benchmark</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="co"># 1. Generate trial balance data (simulating account balances)</span></span>
<span>  <span class="va">accounts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    account <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Account_"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">1000</span><span class="op">)</span>,</span>
<span>    num <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="op">-</span><span class="fl">100000</span><span class="op">:</span><span class="fl">100000</span>, <span class="fl">1000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    denom <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">100L</span>, <span class="fl">1000</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># 2. Convert fractions to doubles</span></span>
<span>  <span class="va">balances</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/fraction_to_double.html">fraction_to_double</a></span><span class="op">(</span><span class="va">accounts</span><span class="op">$</span><span class="va">num</span>, <span class="va">accounts</span><span class="op">$</span><span class="va">denom</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># 3. Run Monte Carlo projection</span></span>
<span>  <span class="va">mc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/monte_carlo_parallel.html">monte_carlo_parallel</a></span><span class="op">(</span></span>
<span>    base_revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">balances</span><span class="op">[</span><span class="va">balances</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    base_expense_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">balances</span><span class="op">[</span><span class="va">balances</span> <span class="op">&lt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span></span>
<span>                        <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">balances</span><span class="op">[</span><span class="va">balances</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    n_sims <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>    n_periods <span class="op">=</span> <span class="fl">12</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="co"># 4. Run sensitivity analysis</span></span>
<span>  <span class="va">sens</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/parallel_sensitivity_grid.html">parallel_sensitivity_grid</a></span><span class="op">(</span></span>
<span>    base_revenue <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">balances</span><span class="op">[</span><span class="va">balances</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    base_expense_rate <span class="op">=</span> <span class="fl">0.70</span>,</span>
<span>    growth_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">0.02</span>, <span class="fl">0.10</span>, by <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span>,</span>
<span>    expense_range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.60</span>, <span class="fl">0.80</span>, by <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span>,</span>
<span>    n_periods <span class="op">=</span> <span class="fl">12</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mc <span class="op">=</span> <span class="va">mc</span>, sens <span class="op">=</span> <span class="va">sens</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">bench</span><span class="fu">::</span><span class="fu">mark</span><span class="op">(</span></span>
<span>  <span class="fu">workflow_benchmark</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  min_iterations <span class="op">=</span> <span class="fl">5</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span></span></code></pre></div>
<p><strong>Typical Result:</strong> Complete workflow in ~60ms</p>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<table class="table">
<thead><tr class="header">
<th>Operation</th>
<th>R Time</th>
<th>Rcpp Time</th>
<th>Speedup</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Fraction conversion (1M)</td>
<td>45ms</td>
<td>8ms</td>
<td>5.6x</td>
</tr>
<tr class="even">
<td>Monte Carlo (10K sims)</td>
<td>2.8s</td>
<td>45ms</td>
<td>62x</td>
</tr>
<tr class="odd">
<td>Sensitivity (143 scenarios)</td>
<td>12ms</td>
<td>1.2ms</td>
<td>10x</td>
</tr>
<tr class="even">
<td>GUID generation (10K)</td>
<td>850ms</td>
<td>8ms</td>
<td>106x</td>
</tr>
</tbody>
</table>
<p>The most significant improvements are seen in:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Monte Carlo simulation</strong>: Parallelization provides
60x+ speedup</li>
<li>
<strong>Batch operations</strong>: GUID generation, validation 100x+
faster</li>
<li>
<strong>Memory efficiency</strong>: 50% reduction in
allocations</li>
</ol>
<p>These optimizations enable interactive analysis of large GnuCash
files and real-time Monte Carlo simulation in Quarto dashboards.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://tinyland.dev" class="external-link">Jess Sullivan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
